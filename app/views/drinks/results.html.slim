style html, body {background: url("http://farm9.staticflickr.com/8204/8237429748_216c68cda0_b.jpg") no-repeat center center fixed; background-size:cover;}

.main.container.white_background role="main"
  .row.graph-padding.blur
    div id="totalschart" class="" style="height: 300px; font-size: 18px;"
    div id="costchart" class="" style="height: 300px; font-size: 18px;"
    div id="unitchart" class="" style="height: 300px; font-size: 18px;"
    .btn.btn-info.col-md-3.button-padding id="totals_button" Show totals
    .btn.btn-info.col-md-3.button-padding id="cost_button" Show costs
    .btn.btn-info.col-md-3.button-padding id="unit_button" Show units

    div class="col-md-4"

  div id="icons"
    .row.table-padding.blur
      table class="table table-hover"
        thead
          tr
            th Date
            th Beer
            th Wine
            th Cocktails
        tbody id="drinks_table"
          - for drink in current_user.binge
            tr.info.collapsey
              td
                = drink.date
              td
                = drink.beer.to_i
              td
                = drink.wine.to_i
              td
                = drink.cocktail.to_i
            tr.active.den
              td Cost (HKD)
              td
                = cost_beer = drink.beer.to_i * 50
              td
                = cost_wine = drink.wine.to_i * 60
              td
                = cost_cocktail = drink.cocktail.to_i * 90
            tr.active.den
              td Units
              td
                = drink.beer.to_i * 2
              td
                = drink.wine.to_i * 2
              td
                = drink.wine.to_i * 3
          tr.danger.collapsey
            td Total
            td #{@total_beer}
            td #{@total_wine}
            td #{@total_cocktail}
          tr.active
            td Cost total
            td $#{@total_beer_cost} HK
            td $#{@total_wine_cost} HK
            td $#{@total_cocktail_cost} HK
          tr.active
            td Units total
            td #{@total_beer_units}
            td #{@total_wine_units}
            td #{@total_cocktail_units}

    / p.click_notice.deepshadow Click to take off those beer googles!

script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"
script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"


/ ------- FOR TRIP EXPLANATIONS -------
javascript:
  $(document).ready(function(){
    var trip = new Trip([
     {
         sel : $('#myfirstchart'),
         position : 'n',
         content : 'Click to take off those beer googles!',
         animation: 'rotateInUpRight',
         delay : 5000,
     },
     {
         sel : $('#drinks_table'),
         position : 'e',
         content : 'Click on each row to reveal more data',
         delay : 4000,
     }], {
     });

    $(document).ready(function() {
      trip.start();
    });
  });


/ ------- GRHAPS -------

javascript:
  new Morris.Bar({
    // ID of the element in which to draw the chart.
    element: 'totalschart',
    // Chart data records -- each entry in this array corresponds to a point on
    // the chart.
    data: [
      { year: 'Total beers', value: #{@total_beer} },
      { year: 'Total wine', value: #{@total_wine} },
      { year: 'Total cocktails', value: #{@total_cocktail} },
    ],
    // The name of the data record attribute that contains x-values.
    xkey: 'year',
    // A list of names of data record attributes that contain y-values.
    ykeys: ['value'],
    // Labels for the ykeys -- will be displayed when you hover over the
    // chart.
    labels: ['Value'],
    barColors: ['#d28c8c'],
    hideHover: true
  });

  new Morris.Bar({
    element: 'costchart',
    data: [
      { year: 'Beer cost', value: #{@total_beer_cost} },
      { year: 'Wine cost', value: #{@total_wine_cost} },
      { year: 'Cocktails cost', value: #{@total_cocktail_cost} },
    ],
    xkey: 'year',
    ykeys: ['value'],
    labels: ['Value'],
    barColors: ['#d28c8c'],
    hideHover: true
  });

  new Morris.Bar({
    element: 'unitchart',
    data: [
      { year: 'Beer unit', value: #{@total_beer_units} },
      { year: 'Wine unit', value: #{@total_wine_units} },
      { year: 'Cocktails unit', value: #{@total_cocktail_units} },
    ],
    xkey: 'year',
    ykeys: ['value'],
    labels: ['Value'],
    barColors: ['#d28c8c'],
    hideHover: true
  });

  $("#totals_button").click(function(){
    $("#totalschart").removeClass("hide");
    $("#costchart").addClass("hide");
    $("#unitchart").addClass("hide");
  });

  $("#cost_button").click(function(){
    $("#totalschart").addClass("hide");
    $("#costchart").removeClass("hide");
    $("#unitchart").addClass("hide");
  });

  $("#unit_button").click(function(){
    $("#totalschart").addClass("hide");
    $("#costchart").addClass("hide");
    $("#unitchart").removeClass("hide");
  });

/ ------- FOR TABLE -------
javascript:
  $(document).ready(function(){
    $(".collapsey").nextUntil('tr.collapsey').slideToggle(100).promise()
  });

  $('.collapsey').click(function () {
    $(this).nextUntil('tr.collapsey').slideToggle(100).promise()
    $(".click_notice").addClass("hide");
  });
  $("html").click(function(){
    $(".row").removeClass("blur");
    $(".row").removeClass("hide");
    $(".click_notice").addClass("blur");
  });

javascript:
  $("#costchart").addClass("hide");
  $("#unitchart").addClass("hide");
